(function(t){function o(o){for(var e,n,l=o[0],a=o[1],c=o[2],h=0,p=[];h<l.length;h++)n=l[h],Object.prototype.hasOwnProperty.call(s,n)&&s[n]&&p.push(s[n][0]),s[n]=0;for(e in a)Object.prototype.hasOwnProperty.call(a,e)&&(t[e]=a[e]);u&&u(o);while(p.length)p.shift()();return r.push.apply(r,c||[]),i()}function i(){for(var t,o=0;o<r.length;o++){for(var i=r[o],e=!0,l=1;l<i.length;l++){var a=i[l];0!==s[a]&&(e=!1)}e&&(r.splice(o--,1),t=n(n.s=i[0]))}return t}var e={},s={app:0},r=[];function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,o,i){n.o(t,o)||Object.defineProperty(t,o,{enumerable:!0,get:i})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,o){if(1&o&&(t=n(t)),8&o)return t;if(4&o&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&o&&"string"!=typeof t)for(var e in t)n.d(i,e,function(o){return t[o]}.bind(null,e));return i},n.n=function(t){var o=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(o,"a",o),o},n.o=function(t,o){return Object.prototype.hasOwnProperty.call(t,o)},n.p="";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],a=l.push.bind(l);l.push=o,l=l.slice();for(var c=0;c<l.length;c++)o(l[c]);var u=a;r.push([0,"chunk-vendors"]),i()})({0:function(t,o,i){t.exports=i("56d7")},"034f":function(t,o,i){"use strict";i("85ec")},"56d7":function(t,o,i){"use strict";i.r(o);i("e260"),i("e6cf"),i("cca6"),i("a79d");var e=i("2b0e"),s=function(){var t=this,o=t.$createElement,i=t._self._c||o;return i("div",{attrs:{id:"app"}},[i("div",{attrs:{id:"outside-box"}},t._l(this.floorCount/2,(function(o){return i("div",{key:o},[i("outside",{ref:"outsideChild",refInFor:!0,staticStyle:{"margin-left":"20px"},attrs:{floorId:o},on:{outsideCallFloorUp:t.callUpHelp,outsideCallFloorDown:t.callDownHelp}})],1)})),0),i("br"),i("br"),i("div",{attrs:{id:"outside-box"}},t._l(this.floorCount/2,(function(o){return i("div",{key:o},[i("outside",{ref:"outsideChild",refInFor:!0,staticStyle:{"margin-left":"14px"},attrs:{floorId:o+10},on:{outsideCallFloorUp:t.callUpHelp,outsideCallFloorDown:t.callDownHelp}})],1)})),0),i("div",{attrs:{id:"inside-box"}},t._l(this.elevatorNum,(function(o){return i("div",{key:o},[i("elevator",{ref:"elevatorChild",refInFor:!0,attrs:{elevatorId:o,floorCount:t.floorCount,pressFloor:t.pressFloor,isUp:t.isUp},on:{elevatorStatus:t.getElevatorStatus}})],1)})),0)])},r=[],n=i("2909"),l=(i("d81d"),function(){var t=this,o=t.$createElement,i=t._self._c||o;return i("div",{attrs:{id:"lay"}},[i("el-card",{staticClass:"box-card",class:{boxMap:!1===t.isOk}},[i("el-card",{class:{map1:0===t.isGoingUp,map2:!(0===t.isGoingUp)},attrs:{shadow:"always"}},[i("div",[i("i",{directives:[{name:"show",rawName:"v-show",value:1===this.isGoingUp,expression:"this.isGoingUp===1"}],staticClass:"el-icon-caret-top"}),i("i",{directives:[{name:"show",rawName:"v-show",value:1!==this.isGoingUp,expression:"this.isGoingUp!==1"}],staticClass:"el-icon-caret-top disabled"}),t._v(" "+t._s(this.currentFloor+1)+"F "),i("i",{directives:[{name:"show",rawName:"v-show",value:-1===this.isGoingUp,expression:"this.isGoingUp===-1"}],staticClass:"el-icon-caret-bottom"}),i("i",{directives:[{name:"show",rawName:"v-show",value:-1!==this.isGoingUp,expression:"this.isGoingUp!==-1"}],staticClass:"el-icon-caret-bottom disabled"})]),i("div",[t._v(t._s(t.msg))])]),i("div",{staticClass:"button-group"},t._l(this.floorCount,(function(o){return i("div",{key:o,staticClass:"button-place"},[i("el-button",{class:{button:!1===t.buttonClicked[o-1],button2:!0===t.buttonClicked[o-1]},attrs:{type:"primary"},on:{click:function(i){return t.handleInsideButtonClick(o)}}},[t._v(" "+t._s(o)+" ")])],1)})),0),i("div",{staticClass:"control"},[i("el-switch",{staticClass:"switch",staticStyle:{display:"block"},attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"开门","inactive-text":"关门"},nativeOn:{click:function(o){return t.doorAlert()}},model:{value:t.isOpen,callback:function(o){t.isOpen=o},expression:"isOpen"}})],1),i("div",{staticClass:"accident"},[i("el-button",{staticStyle:{"margin-left":"-5px","background-color":"#11d82b",border:"none"},attrs:{type:"primary",icon:"el-icon-phone"},on:{click:function(o){return t.askForCommunicate()}}}),i("el-button",{staticStyle:{"margin-left":"80px","background-color":"#e7370a",border:"none"},attrs:{type:"primary",icon:"el-icon-message-solid"},on:{click:function(o){return t.askForHelp()}}})],1)],1),i("el-card",t._l(this.floorCount,(function(o){return i("div",{key:o,staticClass:"floor-place"},[i("el-button",{class:{elevatorFloor:20-o===t.currentFloor,elevatorFloor2:20-o!=t.currentFloor},attrs:{type:"primary"}},[t._v(" "+t._s(21-o)+" ")])],1)})),0)],1)}),a=[],c=(i("a9e3"),{name:"card",props:{elevatorId:Number,floorCount:Number,pressFloor:Number,isUp:Boolean},data:function(){return{buttonClicked:Object(n["a"])(Array(20)).map((function(){return!1})),currentFloor:0,isOpen:!1,aimFloor:0,msg:"空闲中",isGoingUp:0,isSelect:Object(n["a"])(Array(20)).map((function(){return!1})),timer:null,cnt:0,isOk:!0}},methods:{askForCommunicate:function(){var t=this;!0===this.isOk?alert("现在电梯是好的，维修个🔨"):(alert("请求与电梯管理员通话🆘,快点维修电梯啊啊啊"),this.msg="维修中",setTimeout((function(){t.isOk=!0,t.msg="空闲中",t.currentFloor=0,t.isOpen=!1,t.aimFloor=0,t.isGoingUp=0,t.timer=null,t.cnt=0;for(var o=0;o<20;o++)t.$set(t.isSelect,o,!1),t.$set(t.buttonClicked,o,!1)}),3e3),this.updateStateToFather())},isEmpty:function(){for(var t=0;t<20;t++)if(this.isSelect[t])return!1;return!0},updateStateToFather:function(){this.$emit("elevatorStatus",this.elevatorId,this.currentFloor,this.isGoingUp,this.aimFloor,this.isOk)},askForHelp:function(){var t=this;alert("请求电梯管理员援助🔥"),this.isOk=!1,this.isGoingUp=0,this.isOpen=!1,this.updateStateToFather(),setTimeout((function(){t.msg="电梯故障，不能使用🆘"}),1e3)},openDoor:function(){var t=this;this.isOpen=!0,this.msg="快进出电梯哇",this.isSelect[this.currentFloor]=!1,this.buttonClicked[this.currentFloor]=!1,this.updateState(),this.isEmpty()&&(this.isGoingUp=0),this.updateStateToFather(),console.log("此时目标楼层  "+this.aimFloor+"当前楼层  "+this.currentFloor),console.log("此时电梯状态",this.isGoingUp),setTimeout((function(){t.closeDoor()}),3e3)},closeDoor:function(){if(this.isOpen=!1,this.isOk)if(this.isEmpty()){this.msg="空闲中",this.isGoingUp=0,this.cnt=0;for(var t=0;t<20;t++)this.$set(this.isSelect,t,!1),this.$set(this.buttonClicked,t,!1)}else this.msg="忙碌中",setTimeout(this.run,1e3)},checkFromBottom:function(){for(var t=0;t<=this.currentFloor;t++)if(this.isSelect[t])return t;return-1},checkFromTop:function(){for(var t=19;t>=this.currentFloor;--t)if(this.isSelect[t])return t;return-1},updateState:function(){1===this.isGoingUp?(this.aimFloor=this.checkFromTop(),-1==this.aimFloor&&(this.aimFloor=this.checkFromBottom())):-1===this.isGoingUp?(this.aimFloor=this.checkFromBottom(),-1==this.aimFloor&&(this.aimFloor=this.checkFromTop())):(this.aimFloor=this.checkFromTop(),-1===this.aimFloor&&(this.aimFloor=this.checkFromBottom())),this.currentFloor===this.aimFloor?this.isGoingUp=0:this.currentFloor>this.aimFloor?this.isGoingUp=-1:this.isGoingUp=1},insertFromOutside:function(t){var o=this;console.log("父组件触发我了,我是电梯(从1开始）",this.elevatorId),console.log("现在按下第几层？",t),t==this.currentFloor?(this.isOpen=!0,setTimeout((function(){o.isOpen=!1}),3e3)):(this.isSelect[t]=!0,this.updateState(),this.cnt<1&&this.run())},handleInsideButtonClick:function(t){this.isOk?t-1==this.currentFloor?this.isOpen=!0:(this.$set(this.buttonClicked,t-1,!0),console.log("内部队列我康康  ",this.isSelect),console.log("当前点击楼层（从1开始） "+t),this.$set(this.isSelect,t-1,!0),this.updateState(t),this.updateStateToFather(),console.log("当前电梯目标楼层  "+this.aimFloor),console.log("当前电梯状态 "+this.isGoingUp),this.cnt<1&&(console.log("cnt  "+this.cnt),this.run())):alert("这个电梯已经坏了，不要点⚠️")},run:function(){var t=this;this.msg="忙碌中",0!==this.isGoingUp&&(console.log("1目标楼层  "+this.aimFloor+"当前楼层  "+this.currentFloor),1===this.isGoingUp?(console.log("我的当前楼层要加一拉"),this.isSelect[this.currentFloor]||setTimeout((function(){t.currentFloor++,t.updateStateToFather()}),1e3),console.log("目标楼层  "+this.aimFloor+"当前楼层  "+this.currentFloor),console.log(this.currentFloor),!0===this.isSelect[this.currentFloor]?setTimeout((function(){t.openDoor()}),1e3):(setTimeout(this.run,1e3),this.cnt++,console.log("创建了计时器"))):-1===this.isGoingUp&&(console.log("我的当前楼层要减一拉"),this.isSelect[this.currentFloor]||setTimeout((function(){t.currentFloor--,t.updateStateToFather()}),1e3),console.log("目标楼层  "+this.aimFloor+"当前楼层  "+this.currentFloor),console.log(this.currentFloor),!0===this.isSelect[this.currentFloor]?setTimeout((function(){t.openDoor()}),1e3):(setTimeout(this.run,1e3),this.cnt++,console.log("创建了计时器"))))},doorAlert:function(){0!=this.isGoingUp&&(alert("电梯正在运行不要开门呀🆘 "),this.isOpen=!1)}}}),u=c,h=(i("7bfc"),i("2877")),p=Object(h["a"])(u,l,a,!1,null,null,null),f=p.exports,d=function(){var t=this,o=t.$createElement,i=t._self._c||o;return i("div",[i("div",[i("el-tag",{staticStyle:{"background-color":"rgba(45, 133, 173, 0.178)"},attrs:{type:""}},[t._v(t._s(this.floorId))]),i("el-button-group",[i("el-button",{attrs:{type:"primary",icon:"el-icon-top",size:"small"},on:{click:function(o){return t.handleUpClick()}}}),i("el-button",{attrs:{type:"primary",icon:"el-icon-bottom",size:"small"},on:{click:function(o){return t.handleDownClick()}}})],1)],1)])},m=[],F={name:"outside",props:{floorId:Number},data:function(){return{floorCount:20,isOpen:[]}},methods:{handleUpClick:function(){this.floorId<20?(console.log("我这一层向上请求支援",this.floorId),this.$emit("outsideCallFloorUp",this.floorId)):alert("您已经到顶了啦🆘")},handleDownClick:function(){this.floorId>1?(console.log("我这一层向下请求支援",this.floorId),this.$emit("outsideCallFloorDown",this.floorId)):alert("您已经到底了啦🆘")}}},v=F,g=Object(h["a"])(v,d,m,!1,null,null,null),b=g.exports,k={name:"App",components:{elevator:f,outside:b},data:function(){return{elevatorNum:5,floorCount:20,isAllNotOk:!1,elevatorIsOK:Object(n["a"])(Array(5)).map((function(){return!0})),cost:Object(n["a"])(Array(5)).map((function(){return 0})),aimFloor:Object(n["a"])(Array(5)).map((function(){return 0})),goingUp:Object(n["a"])(Array(5)).map((function(){return 0})),currentFloor:Object(n["a"])(Array(5)).map((function(){return 0})),CallElevatorId:0,pressFloor:-1,isUp:!1}},methods:{insertToElevator:function(){this.$refs.elevatorChild[this.CallElevatorId].insertFromOutside(this.pressFloor),console.log("传入第几个电梯（从0开始）：",this.CallElevatorId,"第几层楼",this.pressFloor)},calculateCallElevatorId:function(){if(this.isUp)for(var t=0;t<this.elevatorNum;t++)0===this.goingUp[t]?this.cost[t]=Math.abs(this.currentFloor[t]-this.pressFloor):1===this.goingUp[t]?this.pressFloor>=this.currentFloor[t]?this.cost[t]=this.pressFloor-this.currentFloor[t]:this.cost[t]=this.aimFloor[t]-this.currentFloor[t]+this.aimFloor[t]-this.pressFloor:(this.pressFloor,this.currentFloor[t],this.cost[t]=this.currentFloor[t]-this.aimFloor[t]+this.pressFloor-this.aimFloor[t]);else for(var o=0;o<this.elevatorNum;o++)0===this.goingUp[o]?this.cost[o]=Math.abs(this.currentFloor[o]-this.pressFloor):1===this.goingUp[o]?(this.pressFloor,this.currentFloor[o],this.cost[o]=this.aimFloor[o]-this.currentFloor[o]+this.aimFloor[o]-this.pressFloor):this.pressFloor<=this.currentFloor[o]?this.cost[o]=Math.abs(this.currentFloor[o]-this.pressFloor):this.cost[o]=this.currentFloor[o]-this.aimFloor[o]+this.pressFloor-this.aimFloor[o];for(var i,e,s=0;s<5;s++)if(!0===this.elevatorIsOK[s]){i=this.cost[s],e=s;break}for(var r=0;r<5;r++)!1!==this.elevatorIsOK[r]&&this.cost[r]<i&&(i=this.cost[r],e=r);this.CallElevatorId=e,console.log("让我康康谁来接我",this.CallElevatorId)},getElevatorStatus:function(t,o,i,e,s){var r=0;for(this.elevatorIsOK[t-1]=s,this.currentFloor[t-1]=o,this.goingUp[t-1]=i,this.aimFloor[t-1]=e,r=0;r<5;r++)if(this.elevatorIsOK[r])break;5==r&&(this.isAllNotOk=!0)},callUpHelp:function(t){!1===this.isAllNotOk?(this.pressFloor=t-1,this.isUp=!0,this.calculateCallElevatorId(),this.insertToElevator()):alert("所有电梯都坏啦🆘")},callDownHelp:function(t){!1===this.isAllNotOk?(this.pressFloor=t-1,this.isUp=!1,this.calculateCallElevatorId(),this.insertToElevator()):alert("所有电梯都坏啦🆘")}}},y=k,O=(i("034f"),Object(h["a"])(y,s,r,!1,null,null,null)),C=O.exports,U=i("5c96"),S=i.n(U);i("0fae");e["default"].use(S.a),new e["default"]({el:"#app",render:function(t){return t(C)}}),e["default"].config.productionTip=!1,new e["default"]({render:function(t){return t(C)}}).$mount("#app")},"7bfc":function(t,o,i){"use strict";i("d365")},"85ec":function(t,o,i){},d365:function(t,o,i){}});
//# sourceMappingURL=app.77978d89.js.map