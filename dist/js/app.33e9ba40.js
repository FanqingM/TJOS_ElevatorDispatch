(function(t){function o(o){for(var e,n,l=o[0],a=o[1],c=o[2],h=0,p=[];h<l.length;h++)n=l[h],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&p.push(i[n][0]),i[n]=0;for(e in a)Object.prototype.hasOwnProperty.call(a,e)&&(t[e]=a[e]);u&&u(o);while(p.length)p.shift()();return s.push.apply(s,c||[]),r()}function r(){for(var t,o=0;o<s.length;o++){for(var r=s[o],e=!0,l=1;l<r.length;l++){var a=r[l];0!==i[a]&&(e=!1)}e&&(s.splice(o--,1),t=n(n.s=r[0]))}return t}var e={},i={app:0},s=[];function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,o,r){n.o(t,o)||Object.defineProperty(t,o,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,o){if(1&o&&(t=n(t)),8&o)return t;if(4&o&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&o&&"string"!=typeof t)for(var e in t)n.d(r,e,function(o){return t[o]}.bind(null,e));return r},n.n=function(t){var o=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(o,"a",o),o},n.o=function(t,o){return Object.prototype.hasOwnProperty.call(t,o)},n.p="";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],a=l.push.bind(l);l.push=o,l=l.slice();for(var c=0;c<l.length;c++)o(l[c]);var u=a;s.push([0,"chunk-vendors"]),r()})({0:function(t,o,r){t.exports=r("56d7")},"034f":function(t,o,r){"use strict";r("85ec")},"56d7":function(t,o,r){"use strict";r.r(o);r("e260"),r("e6cf"),r("cca6"),r("a79d");var e=r("2b0e"),i=function(){var t=this,o=t.$createElement,r=t._self._c||o;return r("div",{attrs:{id:"app"}},[r("div",{attrs:{id:"outside-box"}},t._l(this.floorCount/2,(function(o){return r("div",{key:o},[r("outside",{ref:"outsideChild",refInFor:!0,staticStyle:{"margin-left":"20px"},attrs:{floorId:o},on:{outsideCallFloorUp:t.callUpHelp,outsideCallFloorDown:t.callDownHelp}})],1)})),0),r("br"),r("br"),r("div",{attrs:{id:"outside-box"}},t._l(this.floorCount/2,(function(o){return r("div",{key:o},[r("outside",{ref:"outsideChild",refInFor:!0,staticStyle:{"margin-left":"14px"},attrs:{floorId:o+10},on:{outsideCallFloorUp:t.callUpHelp,outsideCallFloorDown:t.callDownHelp}})],1)})),0),r("div",{attrs:{id:"inside-box"}},t._l(this.elevatorNum,(function(o){return r("div",{key:o},[r("elevator",{ref:"elevatorChild",refInFor:!0,attrs:{elevatorId:o,floorCount:t.floorCount,pressFloor:t.pressFloor,isUp:t.isUp},on:{elevatorStatus:t.getElevatorStatus}})],1)})),0)])},s=[],n=r("2909"),l=(r("d81d"),function(){var t=this,o=t.$createElement,r=t._self._c||o;return r("div",{attrs:{id:"lay"}},[r("el-card",{staticClass:"box-card"},[r("el-card",{class:{map1:0===t.isGoingUp,map2:!(0===t.isGoingUp)},attrs:{shadow:"always"}},[r("div",[r("i",{directives:[{name:"show",rawName:"v-show",value:1===this.isGoingUp,expression:"this.isGoingUp===1"}],staticClass:"el-icon-caret-top"}),r("i",{directives:[{name:"show",rawName:"v-show",value:1!==this.isGoingUp,expression:"this.isGoingUp!==1"}],staticClass:"el-icon-caret-top disabled"}),t._v(" "+t._s(this.currentFloor+1)+"F "),r("i",{directives:[{name:"show",rawName:"v-show",value:-1===this.isGoingUp,expression:"this.isGoingUp===-1"}],staticClass:"el-icon-caret-bottom"}),r("i",{directives:[{name:"show",rawName:"v-show",value:-1!==this.isGoingUp,expression:"this.isGoingUp!==-1"}],staticClass:"el-icon-caret-bottom disabled"})]),r("div",[t._v(t._s(t.msg))])]),r("div",{staticClass:"button-group"},t._l(this.floorCount,(function(o){return r("div",{key:o,staticClass:"button-place"},[r("el-button",{class:{button:!1===t.buttonClicked[o-1],button2:!0===t.buttonClicked[o-1]},attrs:{type:"primary"},on:{click:function(r){return t.handleInsideButtonClick(o)}}},[t._v(" "+t._s(o)+" ")])],1)})),0),r("div",{staticClass:"control"},[r("el-switch",{staticClass:"switch",staticStyle:{display:"block"},attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"开门","inactive-text":"关门"},nativeOn:{click:function(o){return t.doorAlert()}},model:{value:t.isOpen,callback:function(o){t.isOpen=o},expression:"isOpen"}})],1),r("div",{staticClass:"accident"},[r("el-button",{staticStyle:{"margin-left":"-5px","background-color":"#11d82b",border:"none"},attrs:{type:"primary",icon:"el-icon-phone"},on:{click:function(o){return t.askForCommunicate()}}}),r("el-button",{staticStyle:{"margin-left":"80px","background-color":"#e7370a",border:"none"},attrs:{type:"primary",icon:"el-icon-message-solid"},on:{click:function(o){return t.askForHelp()}}})],1)],1),r("el-card",t._l(this.floorCount,(function(o){return r("div",{key:o,staticClass:"floor-place"},[r("el-button",{class:{elevatorFloor:20-o===t.currentFloor,elevatorFloor2:20-o!=t.currentFloor},attrs:{type:"primary"}},[t._v(" "+t._s(21-o)+" ")])],1)})),0)],1)}),a=[],c=(r("a9e3"),{name:"card",props:{elevatorId:Number,floorCount:Number,pressFloor:Number,isUp:Boolean},data:function(){return{buttonClicked:Object(n["a"])(Array(20)).map((function(){return!1})),currentFloor:0,isOpen:!1,aimFloor:0,msg:"空闲中",isGoingUp:0,isSelect:Object(n["a"])(Array(20)).map((function(){return!1})),timer:null,cnt:0,selfColor:[{backgroundColor:"hsl(220, 8%, 93%)"},{backgroundColor:"hsl(220, 8%, 93%)"},{backgroundColor:"hsl(220, 8%, 93%)"},{backgroundColor:"hsl(220, 8%, 93%)"},{backgroundColor:"hsl(220, 8%, 93%)"},{backgroundColor:"hsl(220, 8%, 93%)"},{backgroundColor:"hsl(220, 8%, 93%)"},{backgroundColor:"hsl(220, 8%, 93%)"},{backgroundColor:"hsl(220, 8%, 93%)"},{backgroundColor:"hsl(220, 8%, 93%)"},{backgroundColor:"hsl(220, 8%, 93%)"},{backgroundColor:"hsl(220, 8%, 93%)"},{backgroundColor:"hsl(220, 8%, 93%)"},{backgroundColor:"hsl(220, 8%, 93%)"},{backgroundColor:"hsl(220, 8%, 93%)"},{backgroundColor:"hsl(220, 8%, 93%)"},{backgroundColor:"hsl(220, 8%, 93%)"},{backgroundColor:"hsl(220, 8%, 93%)"},{backgroundColor:"hsl(220, 8%, 93%)"},{backgroundColor:"hsl(220, 8%, 93%)"}]}},methods:{askForCommunicate:function(){alert("请求与电梯管理员通话☎️")},askForHelp:function(){alert("请求电梯管理员援助🔥")},isEmpty:function(){for(var t=0;t<20;t++)if(this.isSelect[t])return!1;return!0},updateStateToFather:function(){this.$emit("elevatorStatus",this.elevatorId,this.currentFloor,this.isGoingUp,this.aimFloor)},openDoor:function(){var t=this;this.isOpen=!0,this.msg="快进出电梯哇",this.isSelect[this.currentFloor]=!1,this.buttonClicked[this.currentFloor]=!1,this.updateState(),this.isEmpty()&&(this.isGoingUp=0),this.updateStateToFather(),console.log("此时目标楼层  "+this.aimFloor+"当前楼层  "+this.currentFloor),console.log("此时电梯状态",this.isGoingUp),setTimeout((function(){t.closeDoor()}),3e3)},closeDoor:function(){this.isOpen=!1,this.isEmpty()?(this.msg="空闲中",this.isGoingUp=0,this.cnt=0):(this.msg="忙碌中",setTimeout(this.run,1e3))},checkFromBottom:function(){for(var t=0;t<=this.currentFloor;t++)if(this.isSelect[t])return t;return-1},checkFromTop:function(){for(var t=19;t>=this.currentFloor;--t)if(this.isSelect[t])return t;return-1},updateState:function(){1===this.isGoingUp?(this.aimFloor=this.checkFromTop(),-1==this.aimFloor&&(this.aimFloor=this.checkFromBottom())):-1===this.isGoingUp?(this.aimFloor=this.checkFromBottom(),-1==this.aimFloor&&(this.aimFloor=this.checkFromTop())):(this.aimFloor=this.checkFromTop(),-1===this.aimFloor&&(this.aimFloor=this.checkFromBottom())),this.currentFloor===this.aimFloor?this.isGoingUp=0:this.currentFloor>this.aimFloor?this.isGoingUp=-1:this.isGoingUp=1},insertFromOutside:function(t){console.log("父组件触发我了,我是电梯(从1开始）",this.elevatorId),console.log("现在按下第几层？",t),this.isSelect[t]=!0,this.updateState(),this.cnt<1&&this.run()},handleInsideButtonClick:function(t){this.$set(this.buttonClicked,t-1,!0),console.log("内部队列我康康  ",this.isSelect),console.log("当前点击楼层（从1开始） "+t),this.$set(this.isSelect,t-1,!0),this.updateState(t),this.updateStateToFather(),console.log("当前电梯目标楼层  "+this.aimFloor),console.log("当前电梯状态 "+this.isGoingUp),this.cnt<1&&(console.log("cnt  "+this.cnt),this.run())},run:function(){var t=this;this.msg="忙碌中",0!==this.isGoingUp&&(console.log("1目标楼层  "+this.aimFloor+"当前楼层  "+this.currentFloor),1===this.isGoingUp?(console.log("我的当前楼层要加一拉"),this.isSelect[this.currentFloor]||setTimeout((function(){t.currentFloor++,t.updateStateToFather()}),1e3),console.log("目标楼层  "+this.aimFloor+"当前楼层  "+this.currentFloor),console.log(this.currentFloor),!0===this.isSelect[this.currentFloor]?setTimeout((function(){t.openDoor()}),1e3):(setTimeout(this.run,1e3),this.cnt++,console.log("创建了计时器"))):-1===this.isGoingUp&&(console.log("我的当前楼层要减一拉"),this.isSelect[this.currentFloor]||setTimeout((function(){t.currentFloor--,t.updateStateToFather()}),1e3),console.log("目标楼层  "+this.aimFloor+"当前楼层  "+this.currentFloor),console.log(this.currentFloor),!0===this.isSelect[this.currentFloor]?setTimeout((function(){t.openDoor()}),1e3):(setTimeout(this.run,1e3),this.cnt++,console.log("创建了计时器"))))},doorAlert:function(){0!=this.isGoingUp&&(alert("电梯正在运行不要开门呀🆘 "),this.isOpen=!1)}}}),u=c,h=(r("7bfc"),r("2877")),p=Object(h["a"])(u,l,a,!1,null,null,null),d=p.exports,f=function(){var t=this,o=t.$createElement,r=t._self._c||o;return r("div",[r("div",[r("el-tag",{staticStyle:{"background-color":"rgba(45, 133, 173, 0.178)"},attrs:{type:""}},[t._v(t._s(this.floorId))]),r("el-button-group",[r("el-button",{attrs:{type:"primary",icon:"el-icon-top",size:"small"},on:{click:function(o){return t.handleUpClick()}}}),r("el-button",{attrs:{type:"primary",icon:"el-icon-bottom",size:"small"},on:{click:function(o){return t.handleDownClick()}}})],1)],1)])},m=[],F={name:"outside",props:{floorId:Number},data:function(){return{floorCount:20,isOpen:[]}},methods:{handleUpClick:function(){console.log("我这一层向上请求支援",this.floorId),this.$emit("outsideCallFloorUp",this.floorId)},handleDownClick:function(){console.log("我这一层向下请求支援",this.floorId),this.$emit("outsideCallFloorDown",this.floorId)}}},g=F,v=Object(h["a"])(g,f,m,!1,null,null,null),b=v.exports,C={name:"App",components:{elevator:d,outside:b},data:function(){return{elevatorNum:5,floorCount:20,cost:Object(n["a"])(Array(5)).map((function(){return 0})),aimFloor:Object(n["a"])(Array(5)).map((function(){return 0})),goingUp:Object(n["a"])(Array(5)).map((function(){return 0})),currentFloor:Object(n["a"])(Array(5)).map((function(){return 0})),CallElevatorId:0,pressFloor:-1,isUp:!1}},methods:{insertToElevator:function(){this.$refs.elevatorChild[this.CallElevatorId].insertFromOutside(this.pressFloor),console.log("传入第几个电梯（从0开始）：",this.CallElevatorId,"第几层楼",this.pressFloor)},calculateCallElevatorId:function(){if(this.isUp)for(var t=0;t<this.elevatorNum;t++)0===this.goingUp[t]?this.cost[t]=Math.abs(this.currentFloor[t]-this.pressFloor):1===this.goingUp[t]?this.pressFloor>=this.currentFloor[t]?this.cost[t]=this.pressFloor-this.currentFloor[t]:this.cost[t]=this.aimFloor[t]-this.currentFloor[t]+this.aimFloor[t]-this.pressFloor:(this.pressFloor,this.currentFloor[t],this.cost[t]=this.currentFloor[t]-this.aimFloor[t]+this.pressFloor-this.aimFloor[t]);else for(var o=0;o<this.elevatorNum;o++)0===this.goingUp[o]?this.cost[o]=Math.abs(this.currentFloor[o]-this.pressFloor):1===this.goingUp[o]?(this.pressFloor,this.currentFloor[o],this.cost[o]=this.aimFloor[o]-this.currentFloor[o]+this.aimFloor[o]-this.pressFloor):this.pressFloor<=this.currentFloor[o]?this.cost[o]=Math.abs(this.currentFloor[o]-this.pressFloor):this.cost[o]=this.currentFloor[o]-this.aimFloor[o]+this.pressFloor-this.aimFloor[o];for(var r=this.cost[0],e=0,i=0;i<5;i++)this.cost[i]<r&&(r=this.cost[i],e=i);this.CallElevatorId=e,console.log("让我康康谁来接我",this.CallElevatorId)},getElevatorStatus:function(t,o,r,e){this.currentFloor[t-1]=o,this.goingUp[t-1]=r,this.aimFloor[t-1]=e},callUpHelp:function(t){this.pressFloor=t-1,this.isUp=!0,this.calculateCallElevatorId(),this.insertToElevator()},callDownHelp:function(t){this.pressFloor=t-1,this.isUp=!1,this.calculateCallElevatorId(),this.insertToElevator()}}},k=C,y=(r("034f"),Object(h["a"])(k,i,s,!1,null,null,null)),U=y.exports,w=r("5c96"),S=r.n(w);r("0fae");e["default"].use(S.a),new e["default"]({el:"#app",render:function(t){return t(U)}}),e["default"].config.productionTip=!1,new e["default"]({render:function(t){return t(U)}}).$mount("#app")},"7bfc":function(t,o,r){"use strict";r("d365")},"85ec":function(t,o,r){},d365:function(t,o,r){}});
//# sourceMappingURL=app.33e9ba40.js.map